-- drop objects
drop table departments cascade constraints;
drop table cities cascade constraints;
drop table stores cascade constraints;
drop table employees cascade constraints;
drop table products cascade constraints;



create table departments (
    id                             number generated by default on null as identity 
                                   constraint departments_id_pk primary key,
    name                           varchar2(50 char) constraint departments_name_unq unique not null
)
;


create table cities (
    id                             number generated by default on null as identity 
                                   constraint cities_id_pk primary key,
    department_id                  number
                                   constraint cities_department_id_fk
                                   references departments on delete cascade,
    name                           varchar2(100 char) not null
)
;

create table stores (
    id                             number generated by default on null as identity 
                                   constraint stores_id_pk primary key,
    city_id                        number
                                   constraint stores_city_id_fk
                                   references cities on delete cascade,
    name                           varchar2(30 char) not null,
    adress                         varchar2(100 char) not null,
    administrator                  number
                                   constraint stores_administrator_fk
                                   references employees on delete cascade not null
)
;


create table employees (
    cedula                         number generated by default on null as identity 
                                   constraint employees_cedula_pk primary key,
    complete_name                  varchar2(500 char) not null,
    position                       varchar2(15 char) constraint employees_position_cc
                                   check (position in ('SELLER','ADMINISTRATOR')) not null,
    email                          varchar2(200 char) not null,
    hiring_date                    date not null,
    gender                         varchar2(6 char) constraint employees_gender_cc
                                   check (gender in ('MALE','FEMALE','OTHER')) not null,
    boss                           number
                                   constraint employees_boss_fk
                                   references employees on delete cascade not null,
    store_work                     number
                                   constraint employees_store_work_fk
                                   references stores on delete cascade
)
;




insert into departments (
    id,
    name
) values (
    1,
    'ANTIOQUIA'
);



insert into cities (
    id,
    department_id,
    name
) values (
    1,
    5,
    'Load Balancer Certificate Upgrade'
);



insert into stores (
    id,
    city_id,
    name,
    adress,
    administrator
) values (
    1,
    1,
    'Load Balancer Certificate Upgr',
    'Vestibulum eget rhoncus non,molestie sit amet lectus. Nulla placerat iaculis aliquam. Vestibulum lac',
    1
);


insert into employees (
    cedula,
    name,
    position,
    email,
    hiring_date,
    boss,
    store_work
) values (
    71,
    'Gricelda Luebbers',
    'SELLER',
    'gricelda.luebbers@aaab.com',
    sysdate - 62,
    1,
    1
);


--CONSULTAS ANEXAS DURANTE LA CLASE

--CONSULTA CON JOIN
select CITIES.NAME, DEPARTMENTS.NAME
from CITIES join DEPARTMENTS on DEPARTMENT_ID = DEPARTMENTS.ID
order by CITIES.ID;







